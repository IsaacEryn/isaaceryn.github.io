<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>IntersectionObserver A11y</title>
		<style>
			:root {
				color-scheme: light;
				--bg: #0b0d12;
				--panel: #0f172a;
				--text: #e5e7eb;
				--muted: #94a3b8;
				--accent: #38bdf8;
			}
			* {
				box-sizing: border-box;
			}
			body {
				margin: 0;
				font-family: "SUIT", "Pretendard", "Noto Sans KR", system-ui, sans-serif;
				background: linear-gradient(180deg, #0b0d12 0%, #0f172a 100%);
				color: var(--text);
			}
			a {
				color: var(--accent);
				text-decoration: none;
			}
			a:focus-visible {
				outline: 3px solid var(--accent);
				outline-offset: 3px;
			}
			.skip-link {
				position: absolute;
				left: -999px;
				top: 12px;
				background: #0b0d12;
				color: var(--text);
				padding: 8px 12px;
				border-radius: 8px;
				border: 1px solid rgba(148, 163, 184, 0.4);
			}
			.skip-link:focus {
				left: 16px;
				z-index: 10;
			}
			.skip-link:focus-visible {
				left: 16px;
				z-index: 10;
			}
			header {
				padding: 32px 24px 16px;
				max-width: 900px;
				margin: 0 auto;
			}
			main {
				max-width: 900px;
				margin: 0 auto;
				padding: 16px 24px 96px;
				display: grid;
				gap: 32px;
			}
			.panel {
				background: var(--panel);
				border-radius: 16px;
				padding: 24px;
				border: 1px solid rgba(148, 163, 184, 0.2);
				line-height: 1.6;
			}
			.io-reveal {
				opacity: 0;
				transform: translateY(20px);
				transition: opacity 500ms ease, transform 500ms ease;
				will-change: opacity, transform;
			}
			.io-reveal.is-visible {
				opacity: 1;
				transform: translateY(0);
			}
			.spacer {
				height: 55vh;
				border: 1px dashed rgba(148, 163, 184, 0.2);
				border-radius: 12px;
				display: grid;
				place-items: center;
				color: var(--muted);
			}
			.note {
				color: var(--muted);
				font-size: 14px;
			}
			@media (prefers-reduced-motion: reduce) {
				.io-reveal,
				.io-reveal.is-visible {
					transition: none;
					transform: none;
					opacity: 1;
				}
			}
		</style>
	</head>
	<body>
		<a class="skip-link" href="#content">Skip to content</a>
		<header>
			<a href="../index.html">← Back to list</a>
			<h1>IntersectionObserver A11y</h1>
			<p class="note">
				Reduced motion + keyboard safe + fewer toggles
				<br /><span lang="ko">(모션 감소 + 키보드 안전 + 토글 최소화)</span>
			</p>
		</header>
		<main id="content">
			<section class="panel io-reveal" data-reveal>
				<h2>1) Reduced motion</h2>
				<p>
					If reduced motion is on, reveal instantly.
					<br /><span lang="ko">(모션 감소 설정 시 즉시 표시.)</span>
				</p>
			</section>
			<div class="spacer">Scroll down</div>
			<section class="panel io-reveal" data-reveal>
				<h2>2) Keep focus safe</h2>
				<p>
					No display:none. Focus will not disappear.
					<br /><span lang="ko">(display:none 미사용. 포커스가 사라지지 않음.)</span>
				</p>
			</section>
			<div class="spacer">Keep going</div>
			<section class="panel io-reveal" data-reveal>
				<h2>3) Fewer toggles</h2>
				<p>
					Once visible, stop toggling.
					<br /><span lang="ko">(보인 뒤엔 토글을 멈춤.)</span>
				</p>
			</section>
		</main>
		<script>
			const reduceMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
			const targets = document.querySelectorAll("[data-reveal]");

			if (reduceMotion) {
				targets.forEach((el) => el.classList.add("is-visible"));
			} else {
				const observer = new IntersectionObserver(
					(entries, obs) => {
						for (const entry of entries) {
							if (!entry.isIntersecting) continue;
							entry.target.classList.add("is-visible");
							obs.unobserve(entry.target);
						}
					},
					{ threshold: 0.2 }
				);

				targets.forEach((el) => observer.observe(el));
			}
		</script>
	</body>
</html>
